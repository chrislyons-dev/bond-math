---
import BaseLayout from '@layouts/BaseLayout.astro';
import { getDetailedVersions } from '@lib/utils/versions';

const versions = getDetailedVersions();
---

<BaseLayout
  title="About - Bond Math"
  description="Learn about the Bond Math project - a demonstration of Architecture as Code principles using fixed-income calculations"
  currentPath="/about"
>
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-6 text-gray-900 dark:text-white">About Bond Math</h1>

    <div class="space-y-6">
      <!-- Overview -->
      <div class="card p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Project Overview</h2>
        <div class="prose dark:prose-invert max-w-none">
          <p class="text-gray-600 dark:text-gray-400 mb-4">
            Bond Math is a multi-language serverless microservices system that demonstrates
            <strong class="text-gray-900 dark:text-white">Architecture as Code (AAC)</strong>
            principles while performing real fixed-income bond calculations.
          </p>
          <p class="text-gray-600 dark:text-gray-400">
            This is a <strong class="text-gray-900 dark:text-white">teaching and demonstration
            project</strong>, not production-ready financial software. The focus is on
            architectural patterns, clean code, and automated documentation generation.
          </p>
        </div>
      </div>

      <!-- Core Principles -->
      <div class="card p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Core Principles</h2>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">
              Architecture as Code
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Architecture documented in code annotations with auto-generated C4 diagrams and
              documentation.
            </p>
          </div>
          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">
              Zero-Trust Authorization
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Every service-to-service call verified with internal JWTs for maximum security.
            </p>
          </div>
          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">
              Multi-Language by Design
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Demonstrates clean service boundaries across TypeScript and Python microservices.
            </p>
          </div>
          <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">Cloudflare-Native</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              All services run as Cloudflare Workers with Service Bindings for optimal
              performance.
            </p>
          </div>
        </div>
      </div>

      <!-- Architecture -->
      <div class="card p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
          System Architecture
        </h2>
        <div class="space-y-4">
          <p class="text-gray-600 dark:text-gray-400">
            The system consists of multiple microservices deployed on Cloudflare's edge network:
          </p>

          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-gray-200 dark:border-gray-700">
                  <th class="text-left py-2 px-3 font-semibold text-gray-700 dark:text-gray-300">
                    Service
                  </th>
                  <th class="text-left py-2 px-3 font-semibold text-gray-700 dark:text-gray-300">
                    Language
                  </th>
                  <th class="text-left py-2 px-3 font-semibold text-gray-700 dark:text-gray-300">
                    Purpose
                  </th>
                </tr>
              </thead>
              <tbody class="text-gray-600 dark:text-gray-400">
                <tr class="border-b border-gray-100 dark:border-gray-800">
                  <td class="py-2 px-3 font-medium">Gateway</td>
                  <td class="py-2 px-3">TypeScript</td>
                  <td class="py-2 px-3">Auth verification and routing</td>
                </tr>
                <tr class="border-b border-gray-100 dark:border-gray-800">
                  <td class="py-2 px-3 font-medium">Day Count</td>
                  <td class="py-2 px-3">TypeScript</td>
                  <td class="py-2 px-3">Year fraction calculations</td>
                </tr>
                <tr class="border-b border-gray-100 dark:border-gray-800">
                  <td class="py-2 px-3 font-medium">Bond Valuation</td>
                  <td class="py-2 px-3">Python</td>
                  <td class="py-2 px-3">Price ↔ yield calculations</td>
                </tr>
                <tr class="border-b border-gray-100 dark:border-gray-800">
                  <td class="py-2 px-3 font-medium">Metrics</td>
                  <td class="py-2 px-3">Python</td>
                  <td class="py-2 px-3">Duration, convexity, PV01</td>
                </tr>
                <tr class="border-b border-gray-100 dark:border-gray-800">
                  <td class="py-2 px-3 font-medium">Pricing</td>
                  <td class="py-2 px-3">Python</td>
                  <td class="py-2 px-3">Curve discounting, present value</td>
                </tr>
                <tr>
                  <td class="py-2 px-3 font-medium">UI</td>
                  <td class="py-2 px-3">Astro + React</td>
                  <td class="py-2 px-3">User interface</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Technology Stack -->
      <div class="card p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Technology Stack</h2>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">Frontend</h3>
            <ul class="space-y-1 text-gray-600 dark:text-gray-400">
              <li>• {versions.astro.name} {versions.astro.version}.x - Static site framework</li>
              <li>• {versions.react.name} {versions.react.version}.x - Interactive components</li>
              <li>• {versions.tailwind.name} {versions.tailwind.version}.x - Styling</li>
              <li>• {versions.typescript.name} - Type safety</li>
            </ul>
          </div>
          <div>
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">Backend</h3>
            <ul class="space-y-1 text-gray-600 dark:text-gray-400">
              <li>• Cloudflare Workers - Serverless runtime</li>
              <li>• Hono - TypeScript framework</li>
              <li>• microapi - Python framework (custom)</li>
              <li>• Auth0 - Authentication</li>
            </ul>
          </div>
          <div>
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">Infrastructure</h3>
            <ul class="space-y-1 text-gray-600 dark:text-gray-400">
              <li>• Cloudflare Pages - UI hosting</li>
              <li>• Service Bindings - Inter-service calls</li>
              <li>• GitHub Actions - CI/CD</li>
            </ul>
          </div>
          <div>
            <h3 class="font-semibold mb-2 text-gray-900 dark:text-white">Documentation</h3>
            <ul class="space-y-1 text-gray-600 dark:text-gray-400">
              <li>• AAC Extractors - TypeScript & Python</li>
              <li>• Structurizr DSL - Architecture models</li>
              <li>• PlantUML - Diagram rendering</li>
              <li>• ADRs - Decision records</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Links -->
      <div class="card p-6 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800">
        <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Links & Resources</h2>
        <div class="space-y-3">
          <a
            href="https://github.com/chrislyons-dev/bond-math"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300"
          >
            <svg
              class="w-5 h-5 mr-2"
              fill="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                clip-rule="evenodd"></path>
            </svg>
            Source Code on GitHub
            <span class="sr-only">(opens in new tab)</span>
          </a>
          <a
            href="https://chrislyons-dev.github.io/bond-arch-as-code/architecture"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 mr-2"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
              />
            </svg>
            Architecture Documentation
            <span class="sr-only">(opens in new tab)</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
