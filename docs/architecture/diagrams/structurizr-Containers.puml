@startuml
set separator none
title Bond Math - Containers

top to bottom direction
skinparam ranksep 60
skinparam nodesep 30

skinparam {
  arrowFontSize 10
  defaultTextAlignment center
  wrapWidth 200
  maxMessageSize 100
}

hide stereotype

skinparam rectangle<<bondmath.BondValuation>> {
  BackgroundColor #3776ab
  FontColor #ffffff
  BorderColor #265277
  shadowing false
}
skinparam rectangle<<bondmath.Daycount>> {
  BackgroundColor #3178c6
  FontColor #ffffff
  BorderColor #22548a
  shadowing false
}
skinparam rectangle<<bondmath.Gateway>> {
  BackgroundColor #3178c6
  FontColor #ffffff
  BorderColor #22548a
  shadowing false
}
skinparam rectangle<<bondmath.Metrics>> {
  BackgroundColor #3776ab
  FontColor #ffffff
  BorderColor #265277
  shadowing false
}
skinparam rectangle<<bondmath.Pricing>> {
  BackgroundColor #3776ab
  FontColor #ffffff
  BorderColor #265277
  shadowing false
}
skinparam rectangle<<bondmath.Ui>> {
  BackgroundColor #dddddd
  FontColor #000000
  BorderColor #9a9a9a
  shadowing false
}
skinparam person<<User>> {
  BackgroundColor #08457e
  FontColor #ffffff
  BorderColor #053058
  shadowing false
}
skinparam rectangle<<bondmath>> {
  BorderColor #9a9a9a
  FontColor #9a9a9a
  shadowing false
}

person "==User\n<size:10>[Person]</size>\n\nEnd user accessing the bond calculation system" <<User>> as User

rectangle "bond-math\n<size:10>[Software System]</size>" <<bondmath>> {
  rectangle "==Gateway\n<size:10>[Container: Cloudflare Workers (TypeScript)]</size>\n\nEntry point for all API traffic - handles Auth0 verification, internal JWT minting, and service routing" <<bondmath.Gateway>> as bondmath.Gateway
  rectangle "==Metrics\n<size:10>[Container: Cloudflare Workers (Python)]</size>\n\nBond risk metrics (duration, convexity, PV01, DV01)" <<bondmath.Metrics>> as bondmath.Metrics
  rectangle "==Pricing\n<size:10>[Container: Cloudflare Workers (Python)]</size>\n\nCurve-based cashflow discounting and present value calculations" <<bondmath.Pricing>> as bondmath.Pricing
  rectangle "==Ui\n<size:10>[Container: Cloudflare Pages]</size>\n\nUser interface for bond math calculations - Astro static site with React islands" <<bondmath.Ui>> as bondmath.Ui
  rectangle "==Bond Valuation\n<size:10>[Container: Cloudflare Workers (Python)]</size>\n\nPrice â†” yield calculations and cashflow generation for bullet bonds" <<bondmath.BondValuation>> as bondmath.BondValuation
  rectangle "==Daycount\n<size:10>[Container: Cloudflare Workers (TypeScript)]</size>\n\nAuthoritative day-count and year-fraction calculations for fixed income" <<bondmath.Daycount>> as bondmath.Daycount
}

bondmath.Gateway .[#707070,thickness=2].> bondmath.BondValuation : "<color:#707070>Uses\n<color:#707070><size:8>[Service Binding (internal-jwt)]</size>"
bondmath.Gateway .[#707070,thickness=2].> bondmath.Daycount : "<color:#707070>Uses\n<color:#707070><size:8>[Service Binding (internal-jwt)]</size>"
bondmath.Gateway .[#707070,thickness=2].> bondmath.Metrics : "<color:#707070>Uses\n<color:#707070><size:8>[Service Binding (internal-jwt)]</size>"
bondmath.Gateway .[#707070,thickness=2].> bondmath.Pricing : "<color:#707070>Uses\n<color:#707070><size:8>[Service Binding (internal-jwt)]</size>"
bondmath.Ui .[#707070,thickness=2].> bondmath.Gateway : "<color:#707070>Uses\n<color:#707070><size:8>[https (auth0-jwt)]</size>"
User .[#707070,thickness=2].> bondmath.Ui : "<color:#707070>Uses\n<color:#707070><size:8>[HTTPS]</size>"
@enduml